<!-- Viewport & Language -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

{{ with resources.Get "scss/init.scss" }}
    {{ $opts := dict "outputStyle" "compressed" "transpiler" "dartsass" }}
    {{ with . | toCSS $opts }}
        <style>{{ .Content | safeCSS }}</style>
    {{ end }}
{{ end }}

<title>{{ if .Title }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>
<meta name="description"
      content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ .Permalink }}">
<link rel="icon" href="/images/favicon.ico">
<link rel="preload" href="/images/hero.webp" as="image" fetchpriority="high">

<!-- Open Graph / Facebook -->
{{/*
<meta property="og:type" content="website">*/}}
{{/*
<meta property="og:title" content="{{ .Title }}">*/}}
{{/*
<meta property="og:description"
      content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">*/}}
{{/*
<meta property="og:url" content="{{ .Permalink }}">*/}}
{{/*
<meta property="og:site_name" content="{{ .Site.Title }}">*/}}
{{/*
<meta property="og:image" content="{{ .Site.BaseURL }}images/og-cover.jpg">*/}}

<!-- Twitter Card -->
{{/*
<meta name="twitter:card" content="summary_large_image">*/}}
{{/*
<meta name="twitter:title" content="{{ .Title }}">*/}}
{{/*
<meta name="twitter:description"
      content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">*/}}
{{/*
<meta name="twitter:image" content="{{ .Site.BaseURL }}images/og-cover.jpg">*/}}

{{ if site.Params.glide.glideCss }}
    <link rel="preload" href="{{ site.Params.glide.glideCss }}" as="style" integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous">
    <link rel="stylesheet" href="{{ site.Params.glide.glideCss }}" integrity="{{ .Data.Integrity }}"
          crossorigin="anonymous">
{{ end }}

{{ with resources.Get "scss/main.scss" }}
    {{ $opts := dict
            "enableSourceMap" (not hugo.IsProduction)
            "sourceMapIncludeSources" (not hugo.IsProduction)
            "outputStyle" (cond hugo.IsProduction "compressed" "expanded")
            "targetPath" "css/main.css"
            "transpiler" "dartsass"
    }}
    {{ with . | toCSS $opts }}
        {{ if hugo.IsProduction }}
            {{ with . | fingerprint }}
                <link rel="preload" href="{{ .RelPermalink }}" as="style" integrity="{{ .Data.Integrity }}"
                      crossorigin="anonymous">
                <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}"
                      crossorigin="anonymous">
            {{ end }}
        {{ else }}
            <link rel="preload" href="{{ .RelPermalink }}" as="style">
            <link rel="stylesheet" href="{{ .RelPermalink }}">
        {{ end }}
    {{ end }}
{{ end }}

<script defer type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "L'Éco Forge du Web",
        "url": "https://lecoforgeduweb.fr",
        "logo": "/images/laforgeduweb.svg",
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+33632899791",
            "contactType": "Customer Service",
            "email": "contact@laforgeduweb.fr"
        }
    }
</script>

<!-- Remplacez votre script Plausible actuel par : -->
<script>
    // Charge Plausible après que la page soit stable
    window.addEventListener('load', function () {
        setTimeout(function () {
            const script = document.createElement('script');
            script.defer = true;
            script.src = 'https://plausible.io/js/script.hash.tagged-events.js';
            script.setAttribute('data-domain', 'lecoforgeduweb.fr');
            document.head.appendChild(script);
        }, 2000); // Attend 2 secondes après le load
    });

    window.plausible = window.plausible || function () {
        (window.plausible.q = window.plausible.q || []).push(arguments)
    }
</script>